srcdir = @srcdir@
builddir = @builddir@
top_srcdir = @top_srcdir@
top_builddir = @top_builddir@

include @top_builddir@commonrule

VPATH = $(srcdir)

TARGETS = smlsharp2exe.sh

SOURCES = $(srcdir)/smlsharp2exe.sh.in

all: $(TARGETS)

clean:
	-rm -f $(TARGETS) $(GENSOURCES)

install: $(TARGETS)
	$(INSTALL) -m 755 -d '$(DESTDIR)$(bindir)'
	$(INSTALL_PROGRAM) $(TARGETS) '$(DESTDIR)$(bindir)'

smlsharp2exe.sh: smlsharp2exe.sh.in
	sed -e "s,%target_os%,$(target_os)," \
	    -e "s,%CXX%,$(CXX)," \
	    -e "s,%BINDIR%,$(bindir)," \
	    -e "s,%LIBDIR%,$(libdir)," \
	    $(srcdir)/smlsharp2exe.sh.in > $@
