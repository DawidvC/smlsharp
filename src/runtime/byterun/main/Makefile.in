srcdir = @srcdir@
builddir = @builddir@
top_srcdir = @top_srcdir@
top_builddir = @top_builddir@

include @top_builddir@commonrule

VPATH = $(srcdir)

SOURCES = main.cc

OBJECTS = $(SOURCES:.cc=.$(OBJEXT))

TARGETS = smlsharprun$(EXEEXT)

LIBRARIES = ../../runtime-impl/main/libimlruntimeimpl.$(LIBEXT) \
            ../../runtime-core/main/libimlruntimecore.$(LIBEXT) \
            ../../../instructions/runtime/main/libimlinstructions.$(LIBEXT) \
            ../../../primitives/runtime/main/libimlprimitives.$(LIBEXT)

all: $(TARGETS)

clean:
	-rm -f $(OBJECTS) $(TARGETS)

install: $(TARGETS)
	$(INSTALL) -m 755 -d '$(DESTDIR)$(bindir)'
	$(INSTALL_PROGRAM) -m 755 smlsharprun$(EXEEXT) '$(DESTDIR)$(bindir)'

smlsharprun$(EXEEXT): $(OBJECTS) $(LIBRARIES)
	$(CXX) $(LDFLAGS) $(LIBS) -o $@ $^

main.$(OBJEXT): main.cc
